<!--
@license
Copyright (c) 2017 Swarm City
This code may only be used under the license found at https://github.com/swarmcity/license
-->
<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../../bower_components/app-route/app-location.html">
<link rel="import" href="../../bower_components/iron-a11y-keys/iron-a11y-keys.html">
<link rel="import" href="../../bower_components/app-localize-behavior/app-localize-behavior.html">

<!--
    Displays and shared styles only
-->
<link rel="import" href="../shared-styles.html">
<!--
    Animation pack, only load the animations you need for this page.
-->
<link rel="import" href="../../bower_components/neon-animation/neon-animatable-behavior.html">
<link rel="import" href="../../bower_components/neon-animation/neon-animation-runner-behavior.html">
<link rel="import" href="../../bower_components/neon-animation/animations/slide-from-right-animation.html">
<link rel="import" href="../../bower_components/neon-animation/animations/fade-out-animation.html">
<link rel="import" href="../../bower_components/neon-animation/animations/slide-right-animation.html">
<link rel="import" href="../../bower_components/neon-animation/web-animations.html">

<dom-module id="page-restore">
<template>
<!--
    Page specific styles, if the style is used on more than one page, moveit to shared styles.
-->
    <style include="shared-styles">
    :host {
        display: block;
    }
    .top-container{
        display:block;
        @apply --layout-horizontal;
        @apply --layout-center-justified;
        height:100vh;
    }
    .top-container div {
        @apply --layout-horizontal;
        @apply --layout-center;
        @apply --layout-wrap;
        
    }
    .centered{
        width:300px;        
    }
    .esc-btn{
        display:block;
        font-size:20px;
        text-align: center;
        width:50px;
        height:50px;
        color: var(--grey-3);
        cursor: pointer;
        position:fixed;
        top:18px;
        right:18px;
        font-weight:400;
        background: url('../../../images/swarm-city-sprite.png') -46px -75px;
    }
    .top-container div:nth-child(2) span{
        display:block;
        width:100%;
        font-size:8px;
        opacity:0.5;
        padding-top:30px;
    }
    .big-btn{
        @apply --big-btn;
        color:var(--swarm-city-blue);
        width:100%;
        margin-bottom:18px;
    }
    .big-btn:active{
        transform: scale(0.97,0.97);
    }

    </style>
    <app-location route="{{route}}"></app-location>
    <iron-a11y-keys id="a11y" keys="esc" on-keys-pressed="_escClick"></iron-a11y-keys>
    <div class="top-container">
        <div>
            <div class="centered">
                <button type="button" autofocus class="big-btn restore-ipfs" on-click="_btnIpfs" on-KeyPress="_btnIpfs" tabindex="0">Restore From IPFS</button>
                <button type="button" autofocus class="big-btn restore-file" on-click="_btnFile" on-KeyPress="_btnFile" tabindex="1">Restore From backup file</button>
            </div>
        </div>
        <div>
            <div on-click="_escClick" class="esc-btn"><span>ESC</span></div>
        </div>
    </div>
</template>

<script>
    class PageRestore extends Polymer.mixinBehaviors([
        Polymer.AppLocalizeBehavior,
        Polymer.NeonAnimationRunnerBehavior,
        Polymer.NeonAnimatableBehavior],
        Polymer.Element
    ) {
        static get is() { return 'page-restore'; }
        static get properties() { return {
            animationConfig: {
            value: function() {
                return {
                'entry': {
                    name: 'slide-from-right-animation',
                    node: this,
                    nodeDelay: 0,
                    timing: {duration: 600},
                },
                'exit': {
                    name: 'slide-right-animation',
                    node: this,
                    nodeDelay: 0,
                    timing: {duration: 600},
                },
                };
            },
            },
        };
    }
    connectedCallback() {
        super.connectedCallback();
        this.$.a11y.target = document.querySelector('body');
        this.loadResources(this.resolveUrl('../text-translations.json'));
    }
    _btnKeyPressIpfs(event) {
        if (event.keyCode === 32 || event.keyCode === 13) {
            event.preventDefault();
            this._btnClickIpfs();
        }
    }
    _btnKeyPressFile(event) {
        if (event.keyCode === 32 || event.keyCode === 13) {
            event.preventDefault();
            this._btnClickFile();
        }
    }
    _escClick() {
        if(this.route.path == '/restore/') {
            this.set('route.path', 'new/');
        }
    }
    _btnIpfs() {
        this.set('route.path', 'restore-ipfs/');
    }
    _btnFile() {
        this.set('route.path', 'restore-file/');
    }

    } window.customElements.define(PageRestore.is, PageRestore);
</script>
</dom-module>
